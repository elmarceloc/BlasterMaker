<html>

<head>
    <title>Blaster Maker</title>

    <script src="js/lib/vue.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="js/lib/html2canvas.js"></script>

    <script src="js/lib/uikit.min.js"></script>

    <script src="js/lib/fps.js"></script>


    <script src="js/navbar.js"></script>

    <link rel="stylesheet" href="css/lib/uikit.css" />

    <link rel="stylesheet" href="css/style.css?asd=sd">

    <script src="js/lib/img_box.js"></script>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
        integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w=="
        crossorigin="anonymous" />

    <script>if (typeof module === 'object') { window.module = module; module = undefined; }</script>

    <script src="js/lib/jquery.js"></script>

    <script src="js/lib/axios.js"></script>

    <script>if (window.module) module = window.module;</script>



</head>

<body id="body">


    <nav id="navbar" class="uk-navbar-container uk-margin" uk-navbar>
        <div class="uk-navbar-left">

            <a class="uk-navbar-item uk-logo" href="#">
                <img src="img/logo.png" width="28" height="28"> 
                 Blaster Maker <sup>BETA</sup>
            </a>

            <ul class="uk-navbar-nav">
                <li>
                    <a onclick="showLayout('new')">
                        Nuevo
                    </a>
                </li>



                <li>
                    <a href="#">Ver</a>
                    <div class="uk-navbar-dropdown">
                        <ul class="uk-nav uk-navbar-dropdown-nav">

                            <li>
                                <a onclick="toggleGrid()">
                                    Rejilla
                                </a>
                            </li>
                            <li>
                                <a onclick="toggleIds()">
                                    Colores
                                </a>
                            </li>
                            <li>
                                <a onclick="launchFullScreen(document.documentElement)">
                                    Pantalla completa
                                </a>
                            </li>

                        </ul>
                    </div>
                </li>


                <li>
                    <a href="#">Editar</a>
                    <div class="uk-navbar-dropdown">
                        <ul class="uk-nav uk-navbar-dropdown-nav">

                            <li>
                                <a onclick="undo()">
                                    Deshacer
                                </a>
                            </li>

                            <li>
                                <a onclick="rotateRight()">
                                    Rotar a la derecha
                                </a>
                            </li>

                            <li>
                                <a onclick="rotateLeft()">
                                    Rotar a la izquierda
                                </a>
                            </li>

                            <li>
                                <a onclick="flipHorizontal()">
                                    Invertir horizontalmente
                                </a>
                            </li>

                            <li>
                                <a onclick="flipVertical()">
                                    Invertir verticalmente
                                </a>
                            </li>

                            <li>
                                <a onclick="crop()">
                                    Recortar
                                </a>
                            </li>

                            <li>
                                <a onclick="newDraw(width,height)">
                                    Limpiar
                                </a>
                            </li>

                        </ul>
                    </div>
                </li>


            </ul>


        </div>
    </nav>


    <!-- TODO: cambiar a canvas -->

    <div id="app">

        <div id="new">

            <div class="btnfloat" id="closenew">
                <div role="button" tabindex="0">x</div>
            </div>

            <div id="new-grid" class="uk-grid-small" uk-grid>
                <div class="uk-width-1-3m uk-width-1-2@s uk-light uk-background-secondary uk-padding">

                    <fieldset class="uk-fieldset">

                        <legend class="uk-legend"><i class="fas fa-paint-brush"></i> Nuevo proyecto</legend>
                        <br>


                        <div class="uk-margin">
                            <label class="uk-form-label" for="form-stacked-text">Nombre</label>
                            <input id="name" v-model="name" class="uk-input" type="text" placeholder="Mi proyecto :3">
                        </div>


                        <div class="uk-grid-small" uk-grid>

                            <div class="uk-width-1-2@s">
                                <label class="uk-form-label" for="form-stacked-text">Placas horizontales</label>
         
                                <input id="x" class="uk-input" type="text" value="1">
                            </div>

                            <div class="uk-width-1-2@s">
                                <label class="uk-form-label" for="form-stacked-text">Placas verticales</label>
                                <input id="y" class="uk-input" type="text" value="1">
                            </div>
                        </div>

                        <div class="uk-grid-small" uk-grid>

                            <div class="uk-width-1-2@s">
                                <label class="uk-form-label">Tamaño Beads</label>
                                <div class="uk-form-controls uk-form-controls-text">
                                    <label class="label-radio"><input class="uk-radio" value="5" id="size" type="radio"
                                            name="size" checked>
                                        5 mm</label>
                                    <label class="label-radio"><input class="uk-radio" value="2.6" id="size"
                                            type="radio" name="size">
                                        2.6 mm</label>
                                </div>
                            </div>

                            <div class="uk-width-1-2@s">
                                <label class="uk-form-label">Paleta</label>
                                <div class="uk-form-controls uk-form-controls-text">
                                    <label class="label-radio"><input class="uk-radio" value="all" id="kit" type="radio"
                                            name="kit" checked>
                                        Todos</label>
                                    <label class="label-radio"><input class="uk-radio" value="basic" id="kit"
                                            type="radio" name="kit"> Solo Pack
                                        Basico</label>

                                </div>
                            </div>

                        </div>

                <div class="uk-grid-match uk-grid-small uk-text-center" uk-grid>
                    <div class="uk-width-1-1@s uk-width-1-3@m">
                        <button onclick="createNew()" class="uk-margin uk-button uk-button-secondary"><i class="fas fa-plus-square"></i>   Crear</button>
                    </div>
                    <div class="uk-width-1-1@s uk-width-2-3@m">

                    <button onclick="openRecent()" class="uk-margin uk-button uk-button-primary"> <i
                            uk-icon="uk-icon-file-edit"></i><i class="fas fa-reply"></i>   Abrir ultimo proyecto</button>
                    </div>

                        <!-- <button class="uk-margin uk-button uk-button-primary">Opciones avanzadas</button> 

<br>-->
                    </fieldset>

                </div>
                <div class="uk-width-2-3m uk-width-1-2@s uk-visible@s">

                    <div v-if="onLine" id="online-section">
                        <div v-if="sidemenu == 1 || sidemenu == 2"
                            class="uk-section uk-flex uk-flex-middle social-container" uk-height-viewport>
                            <div v-if="sidemenu == 1" class="uk-width-1-1">
                                <div class="uk-container">
                                    <div class="uk-grid-margin uk-grid uk-grid-stack" uk-grid>
                                        <div class="uk-width-1-1@m">
                                            <div id="login-box"
                                                class="uk-light uk-background-secondary uk-margin uk-width-large uk-margin-auto uk-card uk-card-default uk-card-body uk-box-shadow-large">
                                                <h3 class="uk-card-title uk-text-center">¡Bienvenido a Blaster Maker!
                                                </h3>
                                                <div>
                                                    <div class="uk-margin">
                                                        <div class="uk-inline uk-width-1-1">
                                                            <span class="uk-form-icon"><i
                                                                    class=" fas fa-user"></i></span>

                                                            <input class="uk-input uk-form-large" type="text"
                                                                placeholder="Blaster">
                                                        </div>
                                                    </div>
                                                    <div class="uk-margin">
                                                        <div class="uk-inline uk-width-1-1">
                                                            <span class="uk-form-icon"><i
                                                                    class=" fas fa-lock"></i></span>
                                                            <input class="uk-input uk-form-large" type="password"
                                                                placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;">
                                                        </div>
                                                    </div>
                                                    <div class="uk-margin">
                                                        <button
                                                            class="uk-button uk-button-large uk-width-1-1 uk-button-secondary">Ingresar</button>


                                                        <!-- <div class="social-btn google-btn">
                                                        <div class="icon-wrapper">
                                                            <img class="icon-img"
                                                                src="img/google.svg" />
                                                        </div>
                                                        <p class="btn-text"><b> Ingresar con Google</b></p>
                                                    </div>

                                                    <div class="social-btn facebook-btn" style="background-color: #3b579d;">
                                                        <div class="icon-wrapper">
                                                            <img class="icon-img"
                                                                src="img/facebook.svg" />
                                                        </div>
                                                        <p class="btn-text"><b> Ingresar con Facebook</b></p>
                                                    </div>
                                                    -->
                                                    </div>

                                                    <div class="uk-text-small uk-text-center">
                                                        No estás registrado? <button class="login-button"
                                                            v-on:click="toggleLogin(2)">Crear
                                                            Cuenta</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div v-if="sidemenu == 2" class="uk-width-1-1">
                                <div class="uk-container">
                                    <div class="uk-grid-margin uk-grid uk-grid-stack" uk-grid>
                                        <div class="uk-width-1-1@m">
                                            <div id="register-box"
                                                class="uk-light uk-background-secondary uk-margin uk-width-large uk-margin-auto uk-card uk-card-default uk-card-body uk-box-shadow-large">
                                                <h3 class="uk-card-title uk-text-center">Registrarse</h3>
                                                <div>
                                                    <div class="uk-margin">
                                                        <div class="uk-inline uk-width-1-1">
                                                            <span class="uk-form-icon"><i
                                                                    class=" fas fa-user"></i></span>

                                                            <input class="uk-input uk-form-large" type="text"
                                                                placeholder="Blaster">
                                                        </div>
                                                    </div>
                                                    <div class="uk-margin">
                                                        <div class="uk-inline uk-width-1-1">
                                                            <span class="uk-form-icon"><i
                                                                    class=" fas fa-envelope"></i></span>

                                                            <input class="uk-input uk-form-large" type="text"
                                                                placeholder="Blaster@gmail.com">
                                                        </div>
                                                    </div>
                                                    <div class="uk-margin">
                                                        <div class="uk-inline uk-width-1-1">
                                                            <span class="uk-form-icon"><i
                                                                    class=" fas fa-lock"></i></span>
                                                            <input class="uk-input uk-form-large" type="password"
                                                                placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;">
                                                        </div>
                                                    </div>
                                                    <div class="uk-margin">
                                                        <div class="uk-inline uk-width-1-1">
                                                            <span class="uk-form-icon"><i
                                                                    class=" fas fa-lock"></i></span>
                                                            <input class="uk-input uk-form-large" type="password"
                                                                placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;">
                                                        </div>
                                                    </div>
                                                    <div class="uk-margin">
                                                        <button
                                                            class="uk-button uk-button-large uk-width-1-1 uk-button-secondary">Registrarse</button>

                                                        <!--
                                                    <div class="social-btn google-btn">
                                                        <div class="icon-wrapper">
                                                            <img class="icon-img"
                                                                src="img/google.svg" />
                                                        </div>
                                                        <p class="btn-text"><b> Ingresar con Google</b></p>
                                                    </div>

                                                    <div class="social-btn facebook-btn" style="background-color: #3b579d;">
                                                        <div class="icon-wrapper">
                                                            <img class="icon-img"
                                                                src="img/facebook.svg" />
                                                        </div>
                                                        <p class="btn-text"><b> Ingresar con Facebook</b></p>
                                                    </div>
                                                -->
                                                    </div>

                                                    <div class="uk-text-small uk-text-center">
                                                        <button class="login-button"
                                                            v-on:click="toggleLogin(1)">Ingresar</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div v-if="sidemenu == 3" class="uk-section">


                            <div id="modal-project" uk-modal>
                                <div class="uk-modal-dialog uk-modal-body">
                                    <button class="uk-modal-close-default" type="button" uk-close></button>
                                    <h2 class="uk-modal-title">{{selected.name}}</h2>
                                    <span>{{selected.likes}} <i class="fa-heart fas"></i></span>
                                    <hr>

                                    <img class="img-full uk-align-center" :src="selected.img" alt="">


                                    <table>

                                        <tbody>
                                            <tr v-if="selected.type == 'public'">
                                                <td><i class="fas fa-eye-dropper"></i> Categoria</td>
                                                <td style="width: 120px;">{{selected.category}} </td>
                                            </tr>
                                            <tr>
                                                <td><i class="fas fa-eye-dropper"></i> Paleta</td>
                                                <td style="width: 120px;">{{selected.palette =="all" ? "Completa" :
                                                    "Basica" }}</td>
                                            </tr>
                                            <tr>
                                                <td><i class="fas fa-dot-circle"></i> Tamaño beads</td>
                                                <td style="width: 120px;">{{selected.size == '5' ? '5 mm' : '2.6 mm'}}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td><i class="fas fa-arrows-alt"></i> Cantidad de placas</td>
                                                <td style="width: 120px;">{{selected.width / (selected.size == "5" ? 29
                                                    : 50) + " x " + selected.height / (selected.size == "5" ? 29 : 50)}}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td><i class="fas fa-circle"></i> Beads usados</td>
                                                <td style="width: 120px;">{{selected.total}}</td>
                                            </tr>
                                        </tbody>
                                    </table>


                                    <div class="uk-margin">
                                      
                                    
                                    <button onclick="loadFromWeb()" class=" uk-button uk-button-primary">
                                        <i uk-icon="uk-icon-file-edit"></i>Importar</button>
                                   <!-- <button onclick="loadFromWeb()" class=" uk-button uk-button-primary"
                                        onclick="event.preventDefault()" uk-toggle="target: #modal-publish">   <i  uk-icon="uk-icon-file-edit"></i>{{publicState ? 'Publicar' :
                                        'Ocultar'}}</button>-->
                                    </div>
                                </div>
                            </div>

                            <ul uk-tab uk-switcher="active: 1">
                                <li class="uk-active"><a>Mis Proyectos</a></li>
                                <li><a>Explorar</a></li>
                            </ul>

                            <div class="uk-switcher">

                                <div id="personal-project-list"
                                    class="uk-grid-medium uk-grid-match uk-child-width-1-4@m uk-child-width-1-3@s uk-text-center" uk-grid>



                                    <div v-for="(project, index) in myprojects">
                                        <div id="project" uk-toggle="target: #modal-project" v-on:click="select('personal', index)"
                                            class="uk-card uk-card-default uk-card-body">
                                            <img :src="project.img" alt="">
                                            <h3 class="uk-card-title">{{project.name}}</h3>
                                        </div>
                                    </div>




                                </div>
                                <div id="project-list" class="uk-light uk-background-secondary">

                                    <div class="uk-grid-match uk-grid-small uk-text-center" uk-grid>
                                        <div class="uk-width-1-1@s uk-width-3-5@m uk-width-2-3@l">
                                            <div class="uk-card uk-card-default uk-card-body">
                                                <div class="uk-inline search-bar">
                                                    <span class="uk-form-icon"><i class="fas fa-search"></i></span>
                                                    <input v-model="query" class="uk-input" type="text" placeholder="Mario Bros">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="uk-width-1-1@s uk-width-2-5@m uk-width-1-3@l">
                                            <div class="uk-card uk-card-default uk-card-body">
                                                <select v-model="category" class="uk-select">
                                                    <option value="0">Todo</option>
                                                    <option value="1">Juegos</option>
                                                    <option value="2">Anime</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>




                                    <div class="uk-grid-medium uk-grid-match uk-child-width-1-4@m uk-child-width-1-3@s uk-text-center"
                                        uk-grid>
                                        <div v-for="(project, index) in filteredProjects" :key="project._id">
                                            <div id="project"
                                            class="uk-card uk-card-default uk-card-body">
                                                <img :src="project.img" alt="" uk-toggle="target: #modal-project"  v-on:click="select('browser',index)">
                                                <div class="fav uk-flex-inline">
                                                    <h3 class="uk-card-title">{{project.name}}</h3>
                                                 <!--   <button v-on:click="doFav('browser',index)"><i class="fa-heart" :class="{ 'fas': project.liked, 'far': !project.liked }"></i></button>-->
                                                </div> 
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div v-if="!onLine" class="uk-section">
                        <div class="uk-text-center">
                            No estas conectado a internet  <i class="fa fa-wifi" aria-hidden="true"></i>
                        </div>
                    </div>
                </div>
            </div>


        </div>

        <div id="info" style="visibility: hidden;">
            <div class="btnfloat" id="closeinfo">
                <div role="button" tabindex="0">x</div>
            </div>
            <div class="uk-grid-small" uk-grid>
                <div class="uk-width-1-2@s" id="colorsheet-container">
                    <div id="colorssheet">

                        <div id="info-table" class="table-container">

                            <table class="uk-table uk-table-divider uk-light uk-background-secondary">

                                <thead>
                                    <tr class="heading">
                                        <th><i id="info-icon" class="header-icon fas fa-info"></i> Informacion General
                                        </th>
                                        <th id="pdf-container">
                                            <button data-html2canvas-ignore="True" uk-tooltip="Imprimir" id="pdf"
                                                onclick="printTable()"><i id="pdf-icon"
                                                    class="far fa-file-pdf"></i></button>
                                            <button data-html2canvas-ignore="True" uk-tooltip="Descargar como Imagen"
                                                id="file-image" onclick="downloadTable()"><i id="img-icon"
                                                    class="far fa-file-image"></i></button>
                                        </th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr>
                                        <td><i class="fas fa-file-alt"></i> Nombre</td>
                                        <td style="width: 120px;"><input id="nameInput" type="text" :value="name"></input></td>
                                    </tr>
                                    <tr>
                                        <td><i class="fas fa-eye-dropper"></i> Paleta</td>
                                        <td style="width: 120px;">{{colorPalette}}</td>
                                    </tr>
                                    <tr>
                                        <td><i class="fas fa-dot-circle"></i> Tamaño beads</td>
                                        <td style="width: 120px;">{{beadSize}}</td>
                                    </tr>
                                    <tr>
                                        <td><i class="fas fa-arrows-alt"></i> Cantidad de placas</td>
                                        <td style="width: 120px;">{{size}}</td>
                                    </tr>
                                    <tr>
                                        <td><i class="fas fa-circle"></i> Beads usados</td>
                                        <td style="width: 120px;">{{total}}</td>
                                    </tr>
                                    <tr id="publicTr" data-html2canvas-ignore="True">
                                        <td><i class="fas fa-cloud-upload-alt"></i> {{publicState ? 'Publico' :
                                            'Privado'}}</td>
                                        <td style="width: 120px;"><input id="public" type="checkbox"
                                                onclick="event.preventDefault()" uk-toggle="target: #modal-publish"
                                                class="toggle"></td>
                                    </tr>
                                    <!--<tr>
                                        <td>Paleta</td>
                                        <td>{{palete}}</td>
                                    </tr>
                                    <tr>
                                        <td>Compatible con el Pack inicial:</td>
                                        <td>{{basico}}</td>
                                    </tr>
                                    <tr>
                                        <td>Compatible con el Pack medio:</td>
                                        <td>{{medio}}</td>
                                    </tr>-->
                                </tbody>
                            </table>
                        </div>


                        <div id="color-table" class="table-container" style="height: 320px; overflow-y: auto">
                            <table class="uk-table uk-table-divider uk-table-small  uk-light uk-background-secondary">
                                <thead>
                                    <tr class="heading">
                                        <th><i class="header-icon fas fa-eye-dropper"></i></th>
                                        <th>Nombre</th>
                                        <th style="width: 20px;">Codigo</th>
                                        <th style="width: 20px;">#</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="details" v-for="color in colors" :key="color.name">
                                        <td class="color" v-bind:style="'background-color:'+color.rgb"></td>
                                        <td data-label="name" data-label="color">{{color.name}}</td>
                                        <td data-label="id">{{color.id}}</td>
                                        <td data-label="amount">{{color.amount}}</td>
                                    </tr>
                                </tbody>
                            </table>


                            <div id="modal-publish" uk-modal>
                                <div class="uk-modal-dialog uk-modal-body">
                                    <h2 class="uk-modal-title">{{publicState ? 'Ocultar' : 'Publicar'}}</h2>
                                    <p>Estas seguro que deseas {{publicState ? 'ocultarlo' : 'publicarlo'}}?
                                        
                                        
                                        <div class="uk-margin">
                                            <label class="uk-form-label" for="form-stacked-select">Categoria</label>
                                            <div class="uk-form-controls">

                                                <select class="uk-select">
                                                    <option id="0">Anime</option>
                                                    <option id="1">Juegos</option>
                                                </select>
                                            </div>
                                        </div>

                                    </p>
                                    <p class="uk-text-right">
                                        <button class="uk-button uk-button-default uk-modal-close"
                                            type="button">Cancelar</button>
                                        <button class="uk-button uk-button-secondary uk-modal-close"
                                            v-on:click="togglePublish()" type="button">{{publicState ? 'Ocultar' :
                                            'Publicar'}}</button>
                                    </p>
                                </div>
                            </div>
                            <!--
                            <div id="togglePublic">
                                <input id="public" type="checkbox" onclick="event.preventDefault()" uk-toggle="target: #modal-publish" class="toggle"> <label for="public">{{publicState ? 'Publico' : 'Privado'}}</label>
                            </div> -->
                        </div>


                    </div>

                </div>


                <div id="previewContainer" class="uk-width-1-2@s">
                    <table class="uk-table uk-table-divider  uk-light uk-background-secondary">
                        <thead>
                            <tr class="heading">
                                <th><i id="info-icon" class="header-icon fas fa-paint-brush"></i> Imagen</th>

                            </tr>
                        </thead>


                    </table>
                    <img id="previewCanvas" style="width: 100%;image-rendering: pixelated;">
                </div>

            </div>

        </div>

    </div>

    </div>



    <div id="main" style="visibility: hidden;">
        <div class="btnfloat" id="openinfo">
            <div role="button" tabindex="0">i</div>
        </div>

        <input id="search" placeholder="Buscar" type="number">


        <canvas id="backgroundCanvas" style="image-rendering: pixelated; z-index: 1; "></canvas>
        <canvas id="renderCanvas" style="image-rendering: pixelated; z-index: 2;"></canvas>
        <canvas id="uiCanvas" width="100%" height="100%" style="z-index: 4;"></canvas>

        <!-- <canvas id="canvas4" style="image-rendering: pixelated; z-index: 3; "></canvas>  -->
    </div>


    <div style="display:none;">
        <img id="ui" src="img/ui.png?dsfdsf=sdf" width="768" height="384">
        <img id="mask" src="img/mask.png" width="1280" height="1280">
    </div>

    <script src="js/palette.js"></script>


    <script src="js/utils.js?asasd=234"></script>
    <script src="js/main.js?asasd=sdf"></script>
    <script src="js/events.js?asasd=234"></script>
    <script src="js/panels.js?asasd=234"></script>
    <script src="js/ui.js?asasd=asd"></script>

    <script src="js/ipc.js?asasd=asd"></script>

</body>

</html>